#{extends 'main.html' /}
#{set title:'Gestion Commande' /}

<div class="main container-fluid">

		<div class="form-group row">
			<label class="col-sm-2">Commande : </label>
			<div class="col-sm-10">
				<div class="row">
					<div class="col-sm-4">
						<ul>
						<li><strong>Numero de confirmation</strong></li>
							${c.numConfirmation}
						</ul>
					</div>
					<div class="col-sm-4">
						<ul>
						<li><strong>Date de livraison</strong></li>
							<li>${c.dateLivraison}</li>
						</ul>
					</div>
					<div class="col-sm-4">
						<ul>
							<li><strong>heureLivraison</strong></li>
							#{list listeCommande, as:'commande'}
							<li>${c.heureLivraison}</li>
							#{/list}
						</ul>
					</div>
					<div class="col-sm-4">
						<ul>
							<li><strong>Adresse de livraison</strong></li>
							<li>${c.adressLivraison}</li>
						</ul>
					</div>
					<div class="col-sm-4">
						<ul>
							<li><strong>Statut</strong></li>
							<li>${c.statut}</li>
						</ul>
					</div>
					<div class="col-sm-4">
						<ul>
							<li><strong>Adresse du restaurant</strong></li>
							<li>${c.adresseRestaurant}</li>
						</ul>
					</div>
				</div>
			</div>
		</div>

	#{if user.type == "Livreur"}
	#{form @Application.confirmationCommande()}
		<div class="form-group row hidden">
			<input class="form-control" name="numConfirm" type="text" value= "${c.numConfirmation}" >
			<label class="col-sm-2">Modifier statut commande :</label>
			<div class="col-sm-10">
				<select class="form-control" size="1" name="statut">
					<option name="statut" id="statut" value="Livrée"></option>
				</select>
			</div>
		</div>
		<input class="btn btn-primary" type="submit" name="Update" value = "Accepter de livrer cette livraison"/>
	#{/form}
	#{/if}

	#{if user.type == "Restaurateur"}
	#{form @Application.confirmationCommande()}
		<div class="form-group row hidden">
			<input class="form-control" name="numConfirm" type="text" value= "${c.numConfirmation}" >
			<label class="col-sm-2">Modifier statut commande :</label>
			<div class="col-sm-10">
				<select class="form-control" size="1" name="statut">
					<option name="statut" id="statut" value="Prête"></option>
				</select>
			</div>
		</div>
		<input class="btn btn-primary" type="submit" name="Update" value = "Commande préparée"/>
	#{/form}
	#{/if}




   <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

   <script type="text/javascript"> 

     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();

     var map = new google.maps.Map(document.getElementById('map'), {
       zoom:7,
       mapTypeId: google.maps.MapTypeId.ROADMAP
     });

     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));

     var request = {
       origin: '${c.adresseRestaurant}', 
       destination: '${c.adressLivraison}',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function(response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });
   </script> 

	<div style="width: 600px;">
    	<div id="map" style="width: 880px; height: 600px; float: left;"></div> 
    	<div id="panel" style="width: 300px; float: right;"></div> 
	</div>

	